(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{17:function(e,t,a){e.exports=a(43)},43:function(e,t,a){"use strict";a.r(t);var i=a(0),n=a.n(i),c=a(16),o=a.n(c),s=a(3),l=a(4),r=a(6),u=a(5),d=a(7),m=a(2),v=a.n(m),h=(a(41),function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(r.a)(this,Object(u.a)(t).call(this,e))).state={lockRequestCall:!1,intervalBeforeRequest:1e3,searchText:""},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-lg-8"},n.a.createElement("input",{onKeyUp:this.handleChange.bind(this),type:"text",className:"form-control input-lg",placeholder:"Rechercher un film..."})))}},{key:"handleChange",value:function(e){this.setState({searchText:e.target.value}),this.state.lockRequestCall||(this.setState({lockRequestCall:!0}),setTimeout(function(){this.search(this.state.searchText)}.bind(this),this.state.intervalBeforeRequest))}},{key:"search",value:function(e){this.setState({lockRequestCall:!1}),this.props.callBackRequest(e)}}]),t}(i.Component)),p=function(e){var t=e.title,a=e.description;return n.a.createElement("div",null,n.a.createElement("h1",null,t),n.a.createElement("p",null,a))},f=function(e){var t=e.videoId;return n.a.createElement("div",{className:"embed-responsive embed-responsive-16by9"},n.a.createElement("iframe",{className:"embed-responsive-item",src:"".concat("https://www.youtube.com/embed/").concat(t)}))},k=function(e){return n.a.createElement("div",{onClick:function(){e.callBackMovieClick(e.movie)}.bind(void 0)},n.a.createElement("li",{className:"list-group-item"},n.a.createElement("div",{className:"media"},n.a.createElement("div",{className:"media-left"},n.a.createElement("img",{className:"media-object img-rounded",width:"100px",height:"100px",src:"".concat("https://image.tmdb.org/t/p/w500/").concat(e.movie.poster_path),alt:"..."})),n.a.createElement("div",{className:"media-body"},n.a.createElement("h5",{className:"title_list_item"},e.movie.title)))))},b=function(e){return n.a.createElement("div",null,n.a.createElement("h3",{className:"title_list_item_title"},"Vous aimerez aussi ..."),n.a.createElement("ul",{className:"list-group"},e.movies.map(function(e){return n.a.createElement(k,{key:e.id,movie:e,callBackMovieClick:t})})));function t(t){e.callBackMovieClick(t)}},y="https://api.themoviedb.org/3/",E="22fbee058eb254936ed63ba4a6b590ad",M=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(r.a)(this,Object(u.a)(t).call(this,e))).state={movies:[],currentMovie:{},isSearch:!1},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentWillMount",value:function(){this.initMovies()}},{key:"initMovies",value:function(){v.a.get("".concat(y).concat("discover","/movie?api_key=").concat(E,"&sort_by=popularity.desc&").concat("language=fr&include_adult=false")).then(function(e){this.setState({movies:e.data.results.slice(1,6),currentMovie:e.data.results[0]},function(){this.applyVideoToCurrentMovie()})}.bind(this))}},{key:"applyVideoToCurrentMovie",value:function(){v.a.get("".concat(y,"movie/").concat(this.state.currentMovie.id,"?api_key=").concat(E,"&append_to_response=videos&include_adult=false")).then(function(e){if(e.data.videos.results[0]&&e.data.videos.results[0].key){var t=e.data.videos.results[0].key,a=this.state.currentMovie;a.videoId=t,this.setState({currentMovie:a})}}.bind(this))}},{key:"callBackMovieClick",value:function(e){this.setState({currentMovie:e},function(){this.applyVideoToCurrentMovie(),this.setRecommendation()})}},{key:"searchMovie",value:function(e){if(e)v.a.get("".concat(y,"search/movie?api_key=").concat(E,"&").concat("language=fr&include_adult=false","&query=").concat(e)).then(function(e){e.data&&e.data.results[0]&&e.data.results[0].id!==this.state.currentMovie.id&&this.updateAfterSearch(e)}.bind(this))}},{key:"updateAfterSearch",value:function(e){var t=this;this.setState({currentMovie:e.data.results[0]},function(){t.applyVideoToCurrentMovie(),t.setRecommendation()})}},{key:"setRecommendation",value:function(){v.a.get("".concat(y,"movie/").concat(this.state.currentMovie.id,"/recommendations?api_key=").concat(E,"&language=fr")).then(function(e){e.data&&e.data.results.length>5&&this.setState({movies:e.data.results.slice(1,6)})}.bind(this))}},{key:"shouldComponentUpdate",value:function(e,t){return!!t.currentMovie.videoId}},{key:"render",value:function(){var e=this;return n.a.createElement("div",null,n.a.createElement("div",{className:"search_bar"},n.a.createElement(h,{callBackRequest:this.searchMovie.bind(this)})),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-md-8"},e.state.currentMovie.videoId?n.a.createElement("div",null,n.a.createElement(f,{videoId:e.state.currentMovie.videoId}),n.a.createElement(p,{title:e.state.currentMovie.title,description:e.state.currentMovie.overview})):n.a.createElement("div",null,"Pas de donn\xe9e")),n.a.createElement("div",{className:"col-md-4"},!e.state.movies>=5?n.a.createElement("div",null,"Chargement"):n.a.createElement(b,{movies:e.state.movies,callBackMovieClick:e.callBackMovieClick.bind(e)}))))}}]),t}(i.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(n.a.createElement(M,null),document.querySelector(".container")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[17,1,2]]]);
//# sourceMappingURL=main.760a9b9c.chunk.js.map